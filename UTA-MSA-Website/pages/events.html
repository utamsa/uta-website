<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MSA UT Arlington — Events</title>
  
  <!-- 🟦 Favicons -->
  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="icon" href="/favicon-512x512.png" sizes="512x512" type="image/png">
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="apple-touch-icon" href="../assets/apple-touch-icon.png">

  <!-- 🟨 Web App Manifest -->
  <link rel="manifest" href="../assets/site.webmanifest">

  <!-- 🟥 Theme Colors -->
  <meta name="theme-color" content="#ffffff">
  <meta name="background-color" content="#ffffff">

  <!-- Theme + fragments -->
  <link rel="stylesheet" href="../css/navbar.css" />
  <link rel="stylesheet" href="../css/footer.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
  <link rel="stylesheet" href="../css/events.css" />
  <!-- Page-specific styles ---> 
  <style>
    .calendar {
      width: min(1200px, 92vw);
      margin: 18px auto 0;
      padding: 0 0 24px;
    }

    .view-toggle {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: flex-end;
      margin: 0 0 14px;
    }

    .toggle-btn {
      appearance: none;
      border: 1px solid rgba(18, 60, 102, .15);
      background: #f1f5f9;
      color: #123c66;
      cursor: pointer;
      padding: 10px 14px;
      border-radius: 12px;
      font-weight: 700;
      transition: transform .12s ease, background .2s ease, color .2s ease, border-color .2s ease, box-shadow .2s ease;
    }

    .toggle-btn:hover {
      transform: translateY(-1px);
    }

    .toggle-btn.active {
      background: linear-gradient(90deg, #123c66, #ef7d1a);
      color: #fff;
      border-color: transparent;
      box-shadow: 0 10px 22px rgba(18, 60, 102, .18);
    }

    .cal-wrap {
      position: relative;
      width: 100%;
      height: clamp(520px, 76vh, 960px);
      background: #fff;
      border: 1px solid rgba(12, 16, 22, .08);
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 16px 40px rgba(0, 0, 0, .10);
    }

    .cal-wrap iframe {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      border: 0;
    }

    .cal-note {
      color: #475569;
      font-size: .95rem;
      margin: .75rem 2px 0;
    }

    /* Quick-links & highlights */
    .quick-links {
      display: flex;
      gap: 12px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .highlights {
      width: min(1200px, 92vw);
      margin-inline: auto;
      display: grid;
      gap: 16px;
      grid-template-columns: repeat(3, 1fr);
    }

    .card {
      background: #fff;
      border: 1px solid rgba(12, 16, 22, .08);
      border-radius: 16px;
      padding: 18px;
      box-shadow: 0 10px 24px rgba(0, 0, 0, .06);
    }

    .card h3 {
      margin: 4px 0 6px;
      color: #123c66;
      font-size: 1.15rem;
    }

    .card p {
      margin: 0;
      color: #334155;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-weight: 700;
      color: #0c1016;
    }

    .badge i {
      color: #ef7d1a;
    }

    @media (max-width:900px) {
      .highlights {
        grid-template-columns: 1fr;
      }
    }

    /* Upcoming events */
    .upcoming-grid {
      display: grid;
      gap: 24px;
      grid-template-columns: 1fr;
      margin-top: 20px;
      justify-content: center;
      align-items: start;
    }
    
    /* 3 items: 3 columns on desktop, 1 column on mobile */
    @media (min-width: 768px) {
      .upcoming-grid {
        grid-template-columns: repeat(3, 1fr);
        max-width: 1200px;
        margin-inline: auto;
      }
    }

    .event-card {
      background: #fff;
      border: 1px solid rgba(12, 16, 22, .08);
      border-radius: 16px;
      padding: 18px;
      box-shadow: 0 10px 24px rgba(0, 0, 0, .06);
      text-align: center;
    }

    .event-flyer {
      width: 100%;
      border-radius: 12px;
      margin-bottom: 12px;
    }

    .event-title {
      font-size: 1.2rem;
      color: #123c66;
      margin: 8px 0 4px;
    }

    .event-date {
      color: #334155;
      margin: 0 0 12px;
    }

    .hidden {
      display: none;
    }

    /* Prevent horizontal scrolling in RSVP forms */
    .rsvp-form {
      overflow-x: hidden !important;
      width: 100% !important;
      position: relative;
    }

    .rsvp-form iframe {
      width: 100% !important;
      max-width: 100% !important;
      /* Force the iframe to fit the container */
      transform: scale(1) !important;
      transform-origin: 0 0 !important;
    }

    /* Mobile-specific iframe handling */
    @media (max-width: 640px) {
      .rsvp-form iframe {
        width: 100vw !important;
        max-width: 100vw !important;
        margin-left: -16px; /* Compensate for container padding */
        margin-right: -16px;
      }
    }

    /* Mobile RSVP button improvements */
    @media (max-width: 640px) {
      .rsvp-btn {
        min-height: 44px; /* iOS touch target minimum */
        min-width: 44px;
        touch-action: manipulation;
        -webkit-tap-highlight-color: transparent;
      }
      
      .rsvp-form {
        margin-top: 16px;
        padding: 16px;
        background: #f8fafc;
        border-radius: 12px;
        border: 1px solid rgba(18, 60, 102, 0.1);
        width: 100%;
        overflow-x: auto; /* Allow horizontal scroll if form is too wide */
        display: block !important; /* Force display when not hidden */
      }
      
      .rsvp-form.hidden {
        display: none !important; /* Force hide when hidden */
      }
      
      /* Ensure CustomGForm elements are mobile-friendly */
      .rsvp-form [data-customgform] {
        width: 100%;
        min-width: 280px; /* Minimum width for form elements */
        display: block !important;
        min-height: 200px; /* Ensure minimum height */
      }
      
      /* CustomGForm iframe mobile fixes */
      .rsvp-form iframe {
        width: 100% !important;
        min-height: 200px !important;
        border: none !important;
        display: block !important;
      }
      
      /* CustomGForm form mobile fixes */
      .rsvp-form form {
        width: 100% !important;
        display: block !important;
      }
      
      /* CustomGForm input containers */
      .rsvp-form .form-group,
      .rsvp-form .field {
        width: 100% !important;
        margin-bottom: 16px !important;
        display: block !important;
      }
      
      /* Mobile form input styling */
      .rsvp-form input,
      .rsvp-form textarea,
      .rsvp-form select {
        font-size: 16px; /* Prevents zoom on iOS */
        padding: 12px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
        width: 100%;
        box-sizing: border-box;
      }
      
      .rsvp-form button {
        min-height: 44px;
        font-size: 16px;
        padding: 12px 24px;
      }
    }
  </style>
</head>

<body>
  <!-- Navbar fragment -->
  <div data-include="./fragments/navBar.html"></div>

  <!-- HERO -->
  <section id="hero" class="section hero">
    <div class="hero-wrap">
      <p class="eyebrow">Stay Connected</p>
      <h1 class="title">Explore our <span>events, programs,</span> and <span>calendar</span>.</h1>
      <p class="subhead">
        From Jumu’ah to socials, study circles, and service projects — stay in the loop with everything happening at MSA
        UTA.
      </p>

      <div class="hero-actions">
        <a class="btn btn-primary" href="#upcoming">Upcoming Events</a>
        <a class="btn btn-ghost" href="#calendar-section">View Calendar</a>
      </div>
    </div>
  </section>


  <!-- UPCOMING EVENTS -->
  <section id="upcoming" class="section alt">
    <div class="container">
      <h2 class="section-title center">Upcoming Events</h2>
      <p class="muted tiny center">Check out what's coming up soon.</p>

      <div class="upcoming-grid">

        <!-- Quran Night Event -->
        <article class="event-card">
          <img src="../assets/events/quran-night.JPG" alt="Quran Night Flyer" class="event-flyer" />
          <h3 class="event-title">Quran Night</h3>
          <p class="event-date">
            Friday, November 7 • 5:00 PM • Rosebud Theater
          </p>
          <p class="muted tiny">Join us for a beautiful evening of Quran recitation and reflection • Open to everyone</p>

          <a href="/qurannight" class="btn btn-primary" style="display: inline-block; margin-top: 8px;">
            <i class="fa-solid fa-book-open"></i> Read More
          </a>
        </article>

        <!-- Pumpkin Patch Social Event -->
        <article class="event-card">
          <img src="../assets/events/pumpkin-patch-social.JPG" alt="Pumpkin Patch Social Flyer" class="event-flyer" />
          <h3 class="event-title">Pumpkin Patch Social</h3>
          <p class="event-date">
            Wednesday, October 29 • 5:30 PM • Hall's Pumpkin Farm and Corn Maze
          </p>
          <p class="muted tiny">$15 entry (cash only) • Carpooling available • Sisters only event</p>

          <!-- RSVP -->
          <button class="btn btn-primary rsvp-btn">RSVP Now</button>
          <div class="rsvp-form hidden">
            <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSfx1Z5OzMoseNhOmwMSQm-kAhcG_qUYXHtLfP1i75G8dqilcA/viewform?embedded=true" 
                    width="100%" 
                    height="600" 
                    frameborder="0" 
                    marginheight="0" 
                    marginwidth="0"
                    style="border: none; border-radius: 12px; width: 100%; max-width: 100%; transform: scale(1); transform-origin: 0 0;"
                    loading="lazy"
                    title="Pumpkin Patch Social RSVP Form">
              Loading…
            </iframe>
          </div>
        </article>

        <!-- BBQ & Game Night Event -->
        <article class="event-card">
          <img src="../assets/events/bbq-game-night.jpg" alt="BBQ & Game Night Flyer" class="event-flyer" />
          <h3 class="event-title">BBQ & Game Night</h3>
          <p class="event-date">
            Thursday, October 30 • 6:00 PM • Dar El-Quran
          </p>
          <p class="muted tiny">110 N Davis Dr, Arlington, TX • Brotherhood event • Food restrictions accommodated</p>

          <!-- RSVP -->
          <button class="btn btn-primary rsvp-btn">RSVP Now</button>
          <div class="rsvp-form hidden">
            <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSeDk-9sh8F-T5P6RLjoyDIjWCuryRphflRBqImuJLlCchuWug/viewform?usp=header&embedded=true" 
                    width="100%" 
                    height="600" 
                    frameborder="0" 
                    marginheight="0" 
                    marginwidth="0"
                    style="border: none; border-radius: 12px; width: 100%; max-width: 100%; transform: scale(1); transform-origin: 0 0;"
                    loading="lazy"
                    title="BBQ & Game Night RSVP Form">
              Loading…
            </iframe>
          </div>
        </article>

        <!-- Hike for Humanity Event (Postponed) -->
        <article class="event-card">
          <img src="../assets/events/hikeforhumanity-postponed.jpg" alt="Hike for Humanity Postponed Flyer" class="event-flyer" />
          <h3 class="event-title">Hike for Humanity</h3>
          <p class="event-date">
            POSTPONED • TBD
          </p>
          <p class="muted tiny">$10 per person • Breakfast provided • Bring your family and friends!</p>

          <!-- RSVP -->
          <button class="btn btn-primary rsvp-btn">RSVP Now</button>
          <div class="rsvp-form hidden">
            <iframe src="https://forms.gle/WJDRrNgVhr4955mh9" 
                    width="100%" 
                    height="600" 
                    frameborder="0" 
                    marginheight="0" 
                    marginwidth="0"
                    style="border: none; border-radius: 12px; width: 100%; max-width: 100%; transform: scale(1); transform-origin: 0 0;"
                    loading="lazy"
                    title="Hike for Humanity RSVP Form">
              Loading…
            </iframe>
          </div>
        </article>

        <!-- Listeners Corner Flyer -->
        <article class="event-card">
          <img src="../assets/events/listeners-corner-flyer.png" alt="Listeners Corner Flyer" class="event-flyer" />
          <h3 class="event-title">Listeners Corner</h3>
          <p class="event-date">
            Wednesdays • Starting Sept. 24 • 11:30 AM • In front of the UC
          </p>

          <!-- RSVP (commented out)
          <button class="btn btn-primary rsvp-btn">RSVP Now</button>
          <div class="rsvp-form hidden">
         <div data-customgform="listeners-corner"></div>
          </div>
           -->
        </article>

        <!-- Blueprint Flyer -->
        <article class="event-card">
          <img src="../assets/events/Blueprint.png" alt="The Blueprint Flyer" class="event-flyer" />
          <h3 class="event-title">The Blueprint</h3>
          <p class="event-date">
            Tuesdays • 5:30 PM – Location: SEIR 294
          </p>

          <!-- RSVP (commented out)
          <button class="btn btn-primary rsvp-btn">RSVP Now</button>
          <div class="rsvp-form hidden">
           <div data-customgform="cmf61ic8j00auwnknpxyquaxs"></div>
          </div>
            -->
        </article>

      </div>

    </div>
  </section>



  <!-- HIGHLIGHTS -->
  <section id="highlights" class="section">
    <div class="container">
      <h2 class="section-title center">Highlights</h2>
      <div class="highlights">
        <article class="card">
          <div class="badge"><i class="fa-solid fa-mosque"></i> Jumu’ah on Campus</div>
          <h3>Every Friday • 1:30 PM</h3>
          <p>Join us for Jumu’ah in the UTA Musallah. Come a bit early to find a spot and meet the community!</p>
        </article>
        <article class="card">
          <div class="badge"><i class="fa-solid fa-book-quran"></i> Study Circles</div>
          <h3>Weekly • Evenings</h3>
          <p>Interactive halaqas covering faith, character, and seerah. All levels welcome—bring a friend.</p>
        </article>
        <article class="card">
          <div class="badge"><i class="fa-solid fa-hand-holding-heart"></i> Service Projects</div>
          <h3>Monthly • Weekends</h3>
          <p>Volunteer with us around DFW—food drives, campus cleanups, and collaborative initiatives.</p>
        </article>
      </div>
    </div>
  </section>

  <!-- CALENDAR -->
  <section id="calendar-section" class="section alt">
    <div class="container">
      <h2 class="section-title center">Calendar</h2>
      <p class="muted tiny center">Fast access to our calendar and event resources.</p>

      <!-- Quick Links above calendar -->
      <div class="quick-links" style="margin:16px 0">
        <a class="btn btn-primary" href="#calendar"><i class="fa-regular fa-calendar"></i> View Calendar</a>
        <a class="btn btn-ghost"
          href="https://calendar.google.com/calendar/u/0?cid=3829b628fb7826ae1317e90d0ceb01a699861ca1339348da612a20174cca3db7@group.calendar.google.com"
          target="_blank" rel="noopener"><i class="fa-solid fa-plus"></i> Subscribe</a>
        <a class="btn btn-ghost"
          href="https://calendar.google.com/calendar/ical/3829b628fb7826ae1317e90d0ceb01a699861ca1339348da612a20174cca3db7%40group.calendar.google.com/public/basic.ics"
          target="_blank" rel="noopener"><i class="fa-solid fa-file-arrow-down"></i> Download .ics</a>
      </div>

      <main id="calendar" class="calendar" role="main" aria-label="UTA MSA Calendar">
        <div class="view-toggle" role="tablist" aria-label="Calendar view">
          <button class="toggle-btn active" data-mode="MONTH" role="tab" aria-selected="true">Month</button>
          <button class="toggle-btn" data-mode="WEEK" role="tab" aria-selected="false">Week</button>
          <button class="toggle-btn" data-mode="AGENDA" role="tab" aria-selected="false">Agenda</button>
        </div>

        <div class="cal-wrap">
          <iframe id="gcal-frame" title="UTA MSA Events Calendar" loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>

        <p class="cal-note">
          Times are shown in Central Time (America/Chicago). Tap any event for details or to add it to your own
          calendar.
        </p>
      </main>
    </div>
  </section>

  <!-- FAQ -->
  <section id="faq" class="section alt">
    <div class="container">
      <h2 class="section-title center">FAQ</h2>
      <div class="faq">
        <details>
          <summary>Why don’t I see any events?</summary>
          <p class="muted">Make sure the calendar is public and your view is set correctly. Try switching to the Agenda
            view above. If issues persist, open the full calendar via the “Open in Google Calendar” button.</p>
        </details>
        <details>
          <summary>How do I add this calendar to my phone?</summary>
          <p class="muted">Tap “Add to My Calendar” above. On iPhone, you can also subscribe to the
            <a href="https://calendar.google.com/calendar/ical/3829b628fb7826ae1317e90d0ceb01a699861ca1339348da612a20174cca3db7%40group.calendar.google.com/public/basic.ics"
              target="_blank" rel="noopener">.ics feed</a>.
          </p>
        </details>
        <details>
          <summary>Who can attend MSA events?</summary>
          <p class="muted">Everyone is welcome! Most events are open to all students and community members unless
            otherwise noted.</p>
        </details>
      </div>
    </div>
  </section>

  <!-- CONTACT / FOLLOW -->
  <section id="contact" class="section center">
    <div class="container">
      <h2 class="section-title">Questions or want to get involved?</h2>
      <p class="muted tiny">Reach out using the links below.</p>
      <div class="contact-links"
        style="margin-top:12px; display:flex; gap:12px; justify-content:center; flex-wrap:wrap;">
        <a class="btn btn-primary" href="https://www.instagram.com/msaatuta/" target="_blank"><i
            class="fab fa-instagram"></i> Instagram</a>
        <a class="btn btn-ghost" href="https://linktr.ee/utamsa" target="_blank"><i class="fas fa-link"></i>
          Linktree</a>
        <a class="btn btn-ghost" href="mailto:utarlington.msa@gmail.com"><i class="fas fa-envelope"></i> Email Us</a>
        <a class="btn btn-ghost" href="https://chat.whatsapp.com/HQmjAMqPr8X6bpYwAs5oxD" target="_blank"><i
            class="fab fa-whatsapp"></i> Brothers WhatsApp</a>
        <a class="btn btn-ghost" href="https://chat.whatsapp.com/JZk121BlGr6D0RMQuZ48Sz" target="_blank"><i
            class="fab fa-whatsapp"></i> Sisters WhatsApp</a>
      </div>
    </div>
  </section>

  <!-- Footer fragment -->
  <div data-include="./fragments/footer.html"></div>

  <!-- Fragment loader -->
  <script>
    (async () => {
      const tasks = [...document.querySelectorAll('[data-include]')].map(async el => {
        const file = el.getAttribute('data-include');
        const url = new URL(file, window.location.href).href;
        try {
          const res = await fetch(url, { cache: 'no-store' });
          if (!res.ok) throw new Error(res.status + ' ' + res.statusText);
          el.outerHTML = await res.text();
        } catch (e) {
          el.outerHTML = `<!-- include failed: ${file} (${e}) -->`;
        }
      });
      await Promise.all(tasks);
      document.dispatchEvent(new Event('fragments:ready'));
    })();
  </script>

  <!-- Calendar view toggle logic -->
  <script>
    const CAL_ID = "3829b628fb7826ae1317e90d0ceb01a699861ca1339348da612a20174cca3db7@group.calendar.google.com";
    const BASE = new URL("https://calendar.google.com/calendar/embed");
    BASE.searchParams.set("src", CAL_ID);
    BASE.searchParams.set("ctz", "America/Chicago");
    BASE.searchParams.set("showTitle", "0");
    BASE.searchParams.set("showTabs", "0");
    BASE.searchParams.set("showPrint", "0");
    BASE.searchParams.set("showCalendars", "0");

    const frame = document.getElementById("gcal-frame");

    function setMode(mode) {
      const u = new URL(BASE);
      u.searchParams.set("mode", mode);
      frame.src = u.toString();
      document.querySelectorAll(".toggle-btn").forEach(b => {
        const on = b.dataset.mode === mode;
        b.classList.toggle("active", on);
        b.setAttribute("aria-selected", on ? "true" : "false");
      });
    }

    const defaultMode = matchMedia("(max-width: 640px)").matches ? "AGENDA" : "MONTH";
    setMode(defaultMode);

    document.querySelectorAll(".toggle-btn").forEach(b =>
      b.addEventListener("click", () => setMode(b.dataset.mode))
    );
  </script>


  <!-- RSVP Logic -->
  <script>
    document.querySelectorAll(".rsvp-btn").forEach(btn => {
      btn.addEventListener("click", () => {
        const form = btn.parentElement.querySelector(".rsvp-form");
        form.classList.toggle("hidden");
        btn.textContent = form.classList.contains("hidden") ? "RSVP Now" : "Hide Form";
      });
    });
  </script>

  


  <!-- Navbar JS after fragments -->
  <script src="../script/navBar.js"></script>
  <script>
    // Grid layout is now handled by CSS media queries
    // No JavaScript needed for 3-event layout
  </script>

</body>

</html>